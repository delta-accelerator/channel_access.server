
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>High-level thread-safe interface &#8212; Channel Access server library</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Low-level cas binding" href="server.cas.html" />
    <link rel="prev" title="API Reference" href="api.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-channel_access.server">
<span id="high-level-thread-safe-interface"></span><h1>High-level thread-safe interface<a class="headerlink" href="#module-channel_access.server" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="channel_access.server.PV">
<em class="property">class </em><code class="descclassname">channel_access.server.</code><code class="descname">PV</code><span class="sig-paren">(</span><em>name</em>, <em>type</em>, <em>count=1</em>, <em>*</em>, <em>attributes=None</em>, <em>value_deadband=0</em>, <em>archive_deadband=0</em>, <em>encoding='utf-8'</em>, <em>use_numpy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/channel_access/server.html#PV"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#channel_access.server.PV" title="Permalink to this definition">¶</a></dt>
<dd><p>A channel access PV.</p>
<p>This class gives thread-safe access to a channel access PV.
Always create PV objects through <a class="reference internal" href="#channel_access.server.Server.createPV" title="channel_access.server.Server.createPV"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Server.createPV()</span></code></a>.</p>
<p>The following keys can occur in an attributes dictionary:</p>
<dl class="simple">
<dt>value</dt><dd><p>Data value, type depends on the PV type. For integer types
and enum types this is <code class="docutils literal notranslate"><span class="pre">int</span></code>, for floating point types
this is <code class="docutils literal notranslate"><span class="pre">float</span></code>. For string types this is <code class="docutils literal notranslate"><span class="pre">bytes</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code>
depending on the <code class="docutils literal notranslate"><span class="pre">encondig</span></code> parameter.
For arrays this is a sequence of the corresponding values.</p>
</dd>
<dt>status</dt><dd><p>Value status, one of <code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Status</span></code>.</p>
</dd>
<dt>severity</dt><dd><p>Value severity, one of <code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Severity</span></code>.</p>
</dd>
<dt>timestamp</dt><dd><p>An aware datetime representing the point in time the value was
changed.</p>
</dd>
<dt>enum_strings</dt><dd><p>Tuple with the strings corresponding to the enumeration values.
The length of the tuple must be equal to <a class="reference internal" href="#channel_access.server.PV.count" title="channel_access.server.PV.count"><code class="xref py py-data docutils literal notranslate"><span class="pre">PV.count</span></code></a>.
The entries are <code class="docutils literal notranslate"><span class="pre">bytes</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code> depending on the
<code class="docutils literal notranslate"><span class="pre">encondig</span></code> parameter.
This is only used for enum PVs.</p>
</dd>
<dt>unit</dt><dd><p>String representing the physical unit of the value. The type is
<code class="docutils literal notranslate"><span class="pre">bytes</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code> depending on the <code class="docutils literal notranslate"><span class="pre">encondig</span></code> parameter.
This is only used for numerical PVs.</p>
</dd>
<dt>precision</dt><dd><p>Integer representing the number of relevant decimal places.
This is only used for floating point PVs.</p>
</dd>
<dt>display_limits</dt><dd><p>A tuple <code class="docutils literal notranslate"><span class="pre">(minimum,</span> <span class="pre">maximum)</span></code> representing the range of values
for a user interface.
This is only used for numerical PVs.</p>
</dd>
<dt>control_limits</dt><dd><p>A tuple <code class="docutils literal notranslate"><span class="pre">(minimum,</span> <span class="pre">maximum)</span></code> representing the range of values
accepted for a put request by the server.
This is only used for numerical PVs.</p>
</dd>
<dt>warning_limits</dt><dd><p>A tuple <code class="docutils literal notranslate"><span class="pre">(minimum,</span> <span class="pre">maximum)</span></code>. When any value lies outside of the
range the status becomes <code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Status.LOW</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Status.HIGH</span></code>.
This is only used for numerical types.</p>
</dd>
<dt>alarm_limits</dt><dd><p>A tuple <code class="docutils literal notranslate"><span class="pre">(minimum,</span> <span class="pre">maximum)</span></code>. When any value lies outside of the
range the status becomes <code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Status.LOLO</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Status.HIHI</span></code>.
This is only used for numerical PVs.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str|bytes</em>) – Name of the PV.
If <code class="docutils literal notranslate"><span class="pre">encoding</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code> this must be raw bytes.</p></li>
<li><p><strong>type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Type</span></code>) – The PV type.</p></li>
<li><p><strong>attributes</strong> (<em>dict</em>) – Attributes dictionary with the initial attributes.
These will override the default attributes.</p></li>
<li><p><strong>value_deadband</strong> (<em>int|float</em>) – If any value changes more than this
deadband a value event is fired.
This is only used for numerical PVs.</p></li>
<li><p><strong>archive_deadband</strong> (<em>int|float</em>) – If any value changes more than this
deadband an archive event is fired.
This is only used for numerical PVs.</p></li>
<li><p><strong>encoding</strong> (<em>str</em>) – The encoding used for the PV name and string
attributes. If <code class="docutils literal notranslate"><span class="pre">None</span></code> these values must be bytes.</p></li>
<li><p><strong>use_numpy</strong> (<em>bool</em>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> use numpy arrays. If <code class="docutils literal notranslate"><span class="pre">None</span></code>
use numpy arrays if numpy support is available.</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="channel_access.server.PV.alarm_limits">
<code class="descname">alarm_limits</code><a class="headerlink" href="#channel_access.server.PV.alarm_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>The alarm display limits.</p>
<p>This is writeable and updates the alarm limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tuple(int|float, int|float)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.attributes">
<code class="descname">attributes</code><a class="headerlink" href="#channel_access.server.PV.attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>The current attributes dictionary</p>
<p>This is writeable and updates the attributes dictionary</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.control_limits">
<code class="descname">control_limits</code><a class="headerlink" href="#channel_access.server.PV.control_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>The control display limits.</p>
<p>This is writeable and updates the control display limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tuple(int|float, int|float)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.count">
<code class="descname">count</code><a class="headerlink" href="#channel_access.server.PV.count" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of elements of this PV.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.display_limits">
<code class="descname">display_limits</code><a class="headerlink" href="#channel_access.server.PV.display_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>The current display limits.</p>
<p>This is writeable and updates the display limits:</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tuple(int|float, int|float)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.enum_strings">
<code class="descname">enum_strings</code><a class="headerlink" href="#channel_access.server.PV.enum_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>The current enumeration strings.</p>
<p>The type depends on the <code class="docutils literal notranslate"><span class="pre">encoding</span></code> parameter.</p>
<p>This is writeable and updates the enumeration strings. The length
of the tuple must be equal to the <code class="docutils literal notranslate"><span class="pre">count</span></code> parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tuple(str|bytes)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.is_enum">
<code class="descname">is_enum</code><a class="headerlink" href="#channel_access.server.PV.is_enum" title="Permalink to this definition">¶</a></dt>
<dd><p>Wether this PV is of enumeration type.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.name">
<code class="descname">name</code><a class="headerlink" href="#channel_access.server.PV.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of this PV.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.precision">
<code class="descname">precision</code><a class="headerlink" href="#channel_access.server.PV.precision" title="Permalink to this definition">¶</a></dt>
<dd><p>The current precision.</p>
<p>This is writeable and update the precision.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.severity">
<code class="descname">severity</code><a class="headerlink" href="#channel_access.server.PV.severity" title="Permalink to this definition">¶</a></dt>
<dd><p>The current severity.</p>
<p>This is writeable and updates the severity.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Severity</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.status">
<code class="descname">status</code><a class="headerlink" href="#channel_access.server.PV.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The current status.</p>
<p>This is writeable and updates the status.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Status</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.status_severity">
<code class="descname">status_severity</code><a class="headerlink" href="#channel_access.server.PV.status_severity" title="Permalink to this definition">¶</a></dt>
<dd><p>The current status and severity.</p>
<p>This is writeable and updates the status and severity at
the same time.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tuple(<code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Status</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Severity</span></code>)</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.timestamp">
<code class="descname">timestamp</code><a class="headerlink" href="#channel_access.server.PV.timestamp" title="Permalink to this definition">¶</a></dt>
<dd><p>The timestamp in UTC of the last time value has changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.type">
<code class="descname">type</code><a class="headerlink" href="#channel_access.server.PV.type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of this PV.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Type</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.unit">
<code class="descname">unit</code><a class="headerlink" href="#channel_access.server.PV.unit" title="Permalink to this definition">¶</a></dt>
<dd><p>The current unit.</p>
<p>The type depends on the <code class="docutils literal notranslate"><span class="pre">encoding</span></code> parameter.</p>
<p>This is writeable and updates the unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str|bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.use_numpy">
<code class="descname">use_numpy</code><a class="headerlink" href="#channel_access.server.PV.use_numpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Wether this PV uses numpy arrays for its value.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.value">
<code class="descname">value</code><a class="headerlink" href="#channel_access.server.PV.value" title="Permalink to this definition">¶</a></dt>
<dd><p>The current value of the PV.</p>
<p>This is writeable and updates the value and timestamp.</p>
</dd></dl>

<dl class="attribute">
<dt id="channel_access.server.PV.warning_limits">
<code class="descname">warning_limits</code><a class="headerlink" href="#channel_access.server.PV.warning_limits" title="Permalink to this definition">¶</a></dt>
<dd><p>The warning display limits.</p>
<p>This is writeable and updates the warning limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>tuple(int|float, int|float)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="channel_access.server.Server">
<em class="property">class </em><code class="descclassname">channel_access.server.</code><code class="descname">Server</code><span class="sig-paren">(</span><em>*</em>, <em>encoding=None</em>, <em>use_numpy=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/channel_access/server.html#Server"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#channel_access.server.Server" title="Permalink to this definition">¶</a></dt>
<dd><p>Threaded channel access server.</p>
<p>On creation this class creates a server thread which processes
channel access messages.</p>
<p>The <a class="reference internal" href="#channel_access.server.Server.shutdown" title="channel_access.server.Server.shutdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shutdown()</span></code></a> method must be called to stop the server.</p>
<p>This class implements the context manager protocol. This automatically
shuts the server down at the end of the with-statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">cas</span><span class="o">.</span><span class="n">Server</span><span class="p">()</span> <span class="k">as</span> <span class="n">server</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>encoding</strong> (<em>str</em>) – If not <code class="docutils literal notranslate"><span class="pre">None</span></code> this value is used as a
default for the <code class="docutils literal notranslate"><span class="pre">encoding</span></code> parameter when
calling <a class="reference internal" href="#channel_access.server.Server.createPV" title="channel_access.server.Server.createPV"><code class="xref py py-meth docutils literal notranslate"><span class="pre">createPV()</span></code></a>.</p></li>
<li><p><strong>use_numpy</strong> (<em>bool</em>) – If not <code class="docutils literal notranslate"><span class="pre">None</span></code> this value is used as a
default for the <code class="docutils literal notranslate"><span class="pre">use_numpy</span></code> parameter when
calling <a class="reference internal" href="#channel_access.server.Server.createPV" title="channel_access.server.Server.createPV"><code class="xref py py-meth docutils literal notranslate"><span class="pre">createPV()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="channel_access.server.Server.createPV">
<code class="descname">createPV</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/channel_access/server.html#Server.createPV"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#channel_access.server.Server.createPV" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new channel access PV.</p>
<p>All arguments are forwarded to the <a class="reference internal" href="#channel_access.server.PV" title="channel_access.server.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a> class.</p>
<p>The server does not hold a reference to the returned PV so it
can be collected if it is no longer used. It is the  responsibility
of the user to keep the PV objects alive as long as they are needed.</p>
<p>If a PV with an already existing name is created the server will
use the new PV and ignore the other one. Connections made to the
old PV remain active and use the old PV object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A new PV object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#channel_access.server.PV" title="channel_access.server.PV"><code class="xref py py-class docutils literal notranslate"><span class="pre">PV</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="channel_access.server.Server.shutdown">
<code class="descname">shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/channel_access/server.html#Server.shutdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#channel_access.server.Server.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Shutdown the channel access server.</p>
<p>After this is called no other methods can be called.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="channel_access.server.default_attributes">
<code class="descclassname">channel_access.server.</code><code class="descname">default_attributes</code><span class="sig-paren">(</span><em>type</em>, <em>count</em>, <em>use_numpy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/channel_access/server.html#default_attributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#channel_access.server.default_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the default attributes dictionary for new PVs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">channel_access.common.Type</span></code>) – Type of the PV.</p></li>
<li><p><strong>count</strong> (<em>int</em>) – Number of elements of the PV.</p></li>
</ul>
</dd>
</dl>
<p>use_numpy (bool): If <code class="docutils literal notranslate"><span class="pre">True</span></code> use numpy arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Attributes dictionary.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">channel_access.server</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">High-level thread-safe interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.cas.html">Low-level cas binding</a></li>
</ul>
</li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="genindex.html">Index</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="api.html">API Reference</a><ul>
      <li>Previous: <a href="api.html" title="previous chapter">API Reference</a></li>
      <li>Next: <a href="server.cas.html" title="next chapter">Low-level cas binding</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/server.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/server.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>